<!doctype html>
<html lang="mn"><meta charset="utf-8">
<meta name="generator" content="Hugo 0.81.0" />

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Coroutine - Ochko&#39;s blog">
<meta name="twitter:description" content="Coroutine бол жирийн функц процедурын өргөтгөсөн хэлбэр юм. Функцүүд нэг эхлэлтэй байдаг, өөрөөр хэлбэл функцыг дуудахад эхний мөрөөсөө эхлэн ажилладаг. Харин Coroutine нь олон эхлэлтэй байж болно. Юу гэсэн үг вэ гэвэл, Coroutine-ийг дуудах болгонд өөр өөр мөрөөс эхлэн ажиллаж болдог гэсэн үг. Иймд бидний өдөр тутам хэрэглэдэг функц процедурууд нь Coroutine-ийн нэгэн эгэл тохиолдол.
Нэгэн жишээ авч үзье. Фибоначийн тоонууд гэдэг нь дарааллын гишүүн нь өмнөх хоёрынхоо нийлбэрээр тодорхойлогддог тоонууд юм.">
<meta name="twitter:site" content="http://blog.maahai.com/">
<meta name="twitter:creator" content="L.Ochirkhuyag">
<meta name="twitter:image" content="http://blog.maahai.com/images/avatar.jpg">


<meta property="og:locale" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="Coroutine - Ochko&#39;s blog">
<meta property="og:description" content="Coroutine бол жирийн функц процедурын өргөтгөсөн хэлбэр юм. Функцүүд нэг эхлэлтэй байдаг, өөрөөр хэлбэл функцыг дуудахад эхний мөрөөсөө эхлэн ажилладаг. Харин Coroutine нь олон эхлэлтэй байж болно. Юу гэсэн үг вэ гэвэл, Coroutine-ийг дуудах болгонд өөр өөр мөрөөс эхлэн ажиллаж болдог гэсэн үг. Иймд бидний өдөр тутам хэрэглэдэг функц процедурууд нь Coroutine-ийн нэгэн эгэл тохиолдол.
Нэгэн жишээ авч үзье. Фибоначийн тоонууд гэдэг нь дарааллын гишүүн нь өмнөх хоёрынхоо нийлбэрээр тодорхойлогддог тоонууд юм.">
<meta property="og:url" content="http://blog.maahai.com/tech/2007-10-coroutine/">
<meta property="og:site_name" content="Ochko&#39;s blog">
<meta property="og:image" content="http://blog.maahai.com/images/avatar.jpg">

<meta name="author" content="L.Ochirkhuyag">
<meta name="description" content="Coroutine бол жирийн функц процедурын өргөтгөсөн хэлбэр юм. Функцүүд нэг эхлэлтэй байдаг, өөрөөр хэлбэл функцыг дуудахад эхний мөрөөсөө эхлэн ажилладаг. Харин Coroutine нь олон эхлэлтэй байж болно. Юу гэсэн үг вэ гэвэл, Coroutine-ийг дуудах болгонд өөр өөр мөрөөс эхлэн ажиллаж болдог гэсэн үг. Иймд бидний өдөр тутам хэрэглэдэг функц процедурууд нь Coroutine-ийн нэгэн эгэл тохиолдол.
Нэгэн жишээ авч үзье. Фибоначийн тоонууд гэдэг нь дарааллын гишүүн нь өмнөх хоёрынхоо нийлбэрээр тодорхойлогддог тоонууд юм.">

<title>Coroutine - Ochko&#39;s blog</title>








<link rel="stylesheet" href="http://blog.maahai.com/main.9facde066d35c5fb0565c92181bbbb86b525e039615832148c0b790ae5be871b.css">
<body class="antialiased">
      <div class="container mx-auto py-4 px-4 sm:px-6 lg:px-8"><div class="mb-8">
  <nav class="flex space-x-4" aria-label="Tabs">
    <img class="inline-block h-12 w-12 rounded-full ml-2 mr-6" src="http://blog.maahai.com/images/avatar.jpg" alt="L.Ochirkhuyag">

    <a href="#" class="text-gray-500 hover:text-gray-700 px-3 my-2 py-2 font-medium text-sm rounded-md">
      Blog
    </a>
     <a href="#" class="bg-gray-100 text-gray-700 px-3 my-2 py-2 font-medium text-sm rounded-md" aria-current="page">
    
      Tech
    </a>
    <a href="#" class="text-gray-500 hover:text-gray-700 px-3 my-2 py-2 font-medium text-sm rounded-md">
      About
    </a>
  </nav>
</div>
<div id="content">
<article class="prose max-w-none">
  <div class="text-3xl font-serif">Coroutine</div>
  <time class="text-gray-500" datetime="2007-10-11 19:42:00 &#43;08">2007-10-11</time>
<p>Coroutine бол жирийн функц процедурын өргөтгөсөн хэлбэр юм. Функцүүд нэг эхлэлтэй байдаг, өөрөөр хэлбэл функцыг дуудахад эхний мөрөөсөө эхлэн ажилладаг. Харин Coroutine нь олон эхлэлтэй байж болно. Юу гэсэн үг вэ гэвэл, Coroutine-ийг дуудах болгонд өөр өөр мөрөөс эхлэн ажиллаж болдог гэсэн үг. Иймд бидний өдөр тутам хэрэглэдэг функц процедурууд нь Coroutine-ийн нэгэн эгэл тохиолдол.</p>
<p>Нэгэн жишээ авч үзье. Фибоначийн тоонууд гэдэг нь дарааллын гишүүн нь өмнөх хоёрынхоо нийлбэрээр тодорхойлогддог тоонууд юм. Мэдээж эхний 2 тоо нь өгөгдөх ёстой.</p>
<p>0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610,&hellip;</p>
<p>Дуудах болгонд нэг фибоначийн тоо өгдөг функцийг ruby дээр бичвэл:</p>
<pre><code>fib = Fiber.new do  
  x, y = 0, 1  
  loop do  
    Fiber.yield y  
    x,y = y,x+y  
  end  
end  
  
20.times { puts fib.resume }  

```Энэ функцыг дуудах болгонд дараагийн фибоначийн тоог буцаах болно. Учир нь resume -ээр дуудах болгонд функц yield гэсэн хэсгээс үргэлжлэн ажилладаг. Дараах хуурмаг C кодыг харья.  
</code></pre><p>int coroutine Generate_1_2_3() {<br>
yield 1;  /* Execution begins here upon first call to Generate123 */<br>
yield 2;  /* execution continues here upon &ldquo;resume Generate123&rdquo; */<br>
yield 3;  /* execution continues here upon second &ldquo;resume Generate123&rdquo; */<br>
}</p>
<p>main() {<br>
printf(&quot;%d\n&quot;, Generate_1_2_3());  /* prints &ldquo;1&rdquo; */<br>
printf(&quot;%d\n&quot;, resume Generate_1_2_3()); /* prints &ldquo;2&rdquo; */<br>
printf(&quot;%d\n&quot;, resume Generate_1_2_3()); /* prints &ldquo;3&rdquo; */<br>
}</p>
<pre><code class="language-Дээрхи" data-lang="Дээрхи">  
Coroutine-ийг ихэвчлэн Thread-тэй харьцуулж үздэг. Thread-ээс давуу тал нь гэвэл deadlock, synchronization гэх мэт асуудлууд байхгүй. Гэхдээ мэдээж Thread бол зэрэг ажилладаг учраас түүгээрээ давуу.  
  
Coroutine нь State machine програмчлах, ямар нэгэн дараалсан зүйлсийг үүсгэх, өмнөх фибоначийн жишээ шиг төгсгөлгүй цуваа зэрэгт хэрэглэгддэг. Заримдаа нилээн хүнд бодлогуудыг coroutine ашиглаад хялбархан шийдэх тохиолдол байдаг. Жишээ нь &quot;[Ижил хөвөөний бодлого](http://c2.com/cgi/wiki?SameFringeProblem)&quot;: Хоёр ширхэг хоёртын модны бүх навчнууд зүүнээсээ баруун хүртлээ харгалзан ижил байвал тэр хоёр модыг ижил хөвөөтэй гэнэ. Өгөгдсөн хоёр модыг ижил хөвөөтэй эсэхийг шалга.  
  
Энэ бодлогыг Lua хэл дээр шийдсэн нь:  
</code></pre><p>function tree_leaves(tree)<br>
if tree.leaf then<br>
coroutine.yield(tree.leaf)<br>
else                    <br>
tree_leaves(tree.left)<br>
tree_leaves(tree.right)<br>
end                                  <br>
end</p>
<p>function same_fringe(tree1, tree2)                            <br>
local iter1 = coroutine.wrap(tree_leaves)<br>
local iter2 = coroutine.wrap(tree_leaves)<br>
for node in iter1, tree1 do                  <br>
if node ~= iter2(tree2) then             <br>
return false<br>
end<br>
end                                               <br>
return iter2() == nil<br>
end</p>
<pre><code class="language-Coroutine" data-lang="Coroutine">  
Зарим coroutine -г дэмжсэн програмчлалын хэлүүд:  

*   [Ruby](http://www.ruby-lang.org/)
*   [Python](http://www.python.org/)
*   [Lua](http://www.lua.org/)
*   [Perl](http://www.perl.org/)

Хэрэгцээтэй хуудсууд:  

*   [Википедиа дээрхи тайлбар](http://en.wikipedia.org/wiki/Coroutine)  
    
*   [Товч тодорхойлолт болон, Coroutine дэмждэг хэлүүдийг жагсаалт](http://webseitz.fluxent.com/wiki/CoRoutine)  
    
*   [С хэл дээр хэрхэн хэрэгжүүлж болох тухай](http://www.chiark.greenend.org.uk/%7Esgtatham/coroutines.html)  
    
*   [C++ дээр coroutine нэмэх](http://www.akira.ruc.dk/%7Ekeld/research/COROUTINE/)  
    
*   [CoRoutine Товч танилцуулга](http://c2.com/cgi/wiki?CoRoutine)</code></pre>
<article>

        </div><footer class="mt-20 text-sm">&copy; 2006-2021 L.Ochirkhuyag</footer>
</div>
    </body>
</html>
