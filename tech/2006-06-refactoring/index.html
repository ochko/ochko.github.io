<!doctype html><html lang=mn><head><meta charset=utf-8><meta name=generator content="Hugo 0.81.0"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=twitter:card content="summary"><meta name=twitter:title content="Язгуурыг тодруулахуй буюу Refactoring - Ochko"><meta name=twitter:description content="Code refactoring Програм хангамжын хөгжүүлэлтэд refactoring гэдэг нэршил нь хийгдчихсэн байгаа эх кодын бүтэцийг програмын гадаад шинж чанарт нөлөө үзүүлэлгүйгээр сайжруулан зохион байгуулахыг хэлдэг. Иймд энэ нь алдаа засах эсвэл шинэ үйлдлүүдийг кодод нэмэхээс арай өөр зүйл юм.
Хэрвээ програм хангамжын шинж чанарыг өөрчлөн сайжруулахаар зохиомжлоогүй бол түүнд шинэ боломжуудыг нэмж оруулахад хүндрэл үүсдэг. Үүнийг шийдэхийн тулд эсвэл програмыг бүхэлд нь шинээр хийх эсвэл тухайн шинэ шинж чанарыг нэмэхэд саад учруулж байгаа хэсгийг өөрчлөх болдог."><meta name=twitter:site content="https://ochko.github.io"><meta name=twitter:creator content="L.Ochirkhuyag"><meta name=twitter:image content="https://ochko.github.io/images/koen-stripe.jpg"><meta property="og:locale" content><meta property="og:type" content="article"><meta property="og:title" content="Язгуурыг тодруулахуй буюу Refactoring - Ochko"><meta property="og:description" content="Code refactoring Програм хангамжын хөгжүүлэлтэд refactoring гэдэг нэршил нь хийгдчихсэн байгаа эх кодын бүтэцийг програмын гадаад шинж чанарт нөлөө үзүүлэлгүйгээр сайжруулан зохион байгуулахыг хэлдэг. Иймд энэ нь алдаа засах эсвэл шинэ үйлдлүүдийг кодод нэмэхээс арай өөр зүйл юм.
Хэрвээ програм хангамжын шинж чанарыг өөрчлөн сайжруулахаар зохиомжлоогүй бол түүнд шинэ боломжуудыг нэмж оруулахад хүндрэл үүсдэг. Үүнийг шийдэхийн тулд эсвэл програмыг бүхэлд нь шинээр хийх эсвэл тухайн шинэ шинж чанарыг нэмэхэд саад учруулж байгаа хэсгийг өөрчлөх болдог."><meta property="og:url" content="https://ochko.github.io/tech/2006-06-refactoring/"><meta property="og:site_name" content="Ochko"><meta property="og:image" content="https://ochko.github.io/images/koen-stripe.jpg"><meta name=author content="L.Ochirkhuyag"><meta name=description content="Code refactoring Програм хангамжын хөгжүүлэлтэд refactoring гэдэг нэршил нь хийгдчихсэн байгаа эх кодын бүтэцийг програмын гадаад шинж чанарт нөлөө үзүүлэлгүйгээр сайжруулан зохион байгуулахыг хэлдэг. Иймд энэ нь алдаа засах эсвэл шинэ үйлдлүүдийг кодод нэмэхээс арай өөр зүйл юм.
Хэрвээ програм хангамжын шинж чанарыг өөрчлөн сайжруулахаар зохиомжлоогүй бол түүнд шинэ боломжуудыг нэмж оруулахад хүндрэл үүсдэг. Үүнийг шийдэхийн тулд эсвэл програмыг бүхэлд нь шинээр хийх эсвэл тухайн шинэ шинж чанарыг нэмэхэд саад учруулж байгаа хэсгийг өөрчлөх болдог."><title>Язгуурыг тодруулахуй буюу Refactoring :: Ochko</title><link rel=stylesheet href=https://ochko.github.io/main.ba77102aadc0da1e5595bb0f37d782a1cc4cc908013206d15ea55e9080a93054.css><link rel=stylesheet href=/katex/katex.min.css media=print onload="this.media='all',this.onload=null"></head><body class=antialiased><div class="container mx-auto py-4 px-4 sm:px-6 lg:px-8 min-h-screen flex flex-col"><header class=mb-8><nav class="flex space-x-4" aria-label=Tabs><a href=/><img class="inline-block h-12 w-12 rounded-full ml-2 mr-6" src=https://ochko.github.io/images/koen-stripe.jpg alt=L.Ochirkhuyag></a>
<a href=https://ochko.github.io/posts/ class="text-gray-500 hover:text-gray-700 px-3 my-2 py-2 font-medium text-sm rounded-md">Personal Blog</a>
<a href=https://ochko.github.io/tech/ class="bg-gray-100 text-gray-500 hover:text-gray-700 px-3 my-2 py-2 font-medium text-sm rounded-md">Tech stuff</a></nav></header><div class="flex-1 pt-10"><article class="prose max-w-none"><h1>Язгуурыг тодруулахуй буюу Refactoring</h1><time class="text-sm text-right text-gray-600" datetime="2006-06-27 12:36:00 +09">2006-06-27</time><div class=pt-4><h3 id=code-refactoring>Code refactoring</h3><p>Програм хангамжын хөгжүүлэлтэд <strong>refactoring</strong> гэдэг нэршил нь хийгдчихсэн байгаа эх кодын бүтэцийг програмын гадаад шинж чанарт нөлөө үзүүлэлгүйгээр сайжруулан зохион байгуулахыг хэлдэг. Иймд энэ нь алдаа засах эсвэл шинэ үйлдлүүдийг кодод нэмэхээс арай өөр зүйл юм.</p><p>Хэрвээ програм хангамжын шинж чанарыг өөрчлөн сайжруулахаар зохиомжлоогүй бол түүнд шинэ боломжуудыг нэмж оруулахад хүндрэл үүсдэг. Үүнийг шийдэхийн тулд эсвэл програмыг бүхэлд нь шинээр хийх эсвэл тухайн шинэ шинж чанарыг нэмэхэд саад учруулж байгаа хэсгийг өөрчлөх болдог. Ингэж кодыг дахин бүтэцчилснээр код ойлгомжтой, дараа өөрчлөлт болон нэмэлт шинж чанар оруулахад хялбар болдог.</p><p>Энгийн жишээ гэвэл с гэсэн хувьсагчыг count гэж ойлгомжтой болгон солих. Цаашлаад програм дотор байгаа зарим блокыг дэд функц болгож тусгаарлах. Мөн илүү гүнзгийрвэл if нөхцөлүүдийг polymorphism-оор шийдэх гэх мэт байж болно. Энэ нэр томьёо нь тоо болон олон гишүүнтийг үржвэрт задлах болон язгуурыг олохтой төстэй. Жишээлбэл</p><span class="block text-center">\(9=3\times3,\)</span>
<span class="block text-center">\(x^2-1=(x-1)(x+1)\)</span><p>Эдгээр задаргаанууд нь анхны илэрхийлэл болон тооны язгуур бүтэцийг илүү тодорхой болгож өгч байна. Үүнтэй адилаар refactoring хийснээр тухайн кодыг илүү тодорхой бүтэцтэй болгож цаад шинж чанарыг нь илрүүлэн гаргаж тавина гэсэн үг. Гэхдээ кодын язгуурчлалын хувьд тооных шиг цааш задрахгүй болтол нь задлана гэсэн ойлголт байхгүй юм. Өөрийн шаардлагыг хангах хэмжээнд боломжын хирээр язгуурчлахад л хангалттай. Ингээд refactoring гэдэгийг цааш &ldquo;язгуурчлал&rdquo; гэж хэлье.</p><p>Кодын язгуурчлал хийхэд хэрэглэдэг энгийн аргууд бол:</p><ul><li>Гишүүн хувьсагч болон функцын нэрийг өөрчлөх</li><li>Гишүүн хувьсагч болон шинж чанаруудыг өөр класс руу нүүлгэх</li><li>Код доторх зарим блокыг дэд функц болгон таслах</li><li>Гишүүн хувьсагчыг далдлах(Encapsulation)</li><li>Шинээр класс үүсгэх</li><li>Шинэ интерфэйс тодорхойлох</li><li>Том функцыг жижиг ойлгомжтой хэсгүүдэд хуваах</li><li>Ерөнхий төрөл үүсгэх</li><li>Ерөнхий хэрэглэгдэх функыг дээд класс руу нь зөөх</li><li>Зарим функцыг доод класс руу нь зөөх</li><li>Хэрэггүй кодыг зайлуулах</li></ul><p>Extreme programming болон Agile аргачлалд язгуурчлал нь хөгжүүлэлтийн тойргын салшгүй хэсэг байдаг. Хөгжүүлэгчид шинэ тест болон шинэ шинж чанарыг нэмэхдээ өмнөх кодоо язгуурчлах замаар кодын дотоод бүтэцийг ойлгомжтой бөгөөд нийлэмжтэй болгодог. Кодын язгуурчлал нь бага багаар аажмаар кодын бүтцийг өөрчилдөг. Нэг дор олон тооны өөрчлөлт оруулах нь өмнө ажиллаж байсан шинж чанарт гаж нөлөө үзүүлэх магадлалтай. Иймд автомат тестийн техникийг хэрэглэж өөрчлөлтийн дараа өмнө ажиллаж байсан шинж чанарууд хадгалагдаж үлдсэн эсэхийг шалгадаг. Товчдоо бол өөрчлөлт хийхийн өмнө шаардлагатай язгуурчлалуудыг хийгээд код өмнөх шинж чанараа хадгалж үлдсэнийг шалгана, дараа нь нэмэлт шинж чанаруудаа оруулна гэсэн санаа.</p><p>Програмын код дахь язгуурчлалаас гадна энгийн текст мэдээллийн хувьд бас refactoring гэдэг ойлголт байх бөгөөд тухайн текстийн утгыг нь хэвээр хадгалж илүү товчхон ойлгомжтойгоор зохион байгуулахыг хэлдэг байна. Ерөнхий санаа ижил. Системийн хөгжүүлэлтийн бусад хэсгүүдэд ч мөн язгуурчлал ил болон далд байдлаар явагдаж байдаг. Тухайлбал Өгөгдлийн сангийн язгуурчлал(Database Refactoring). Өгөгдлийн санг өмнөх шинж чанарыг нь алдагдуулалгүй өөрчлөн зохион байгуулна гэдэг хүндрэлтэй. Учир нь өгөгдлийн сан гэдэг маш олон хэрэглэгчтэй тул түүн дээр суурилж байгаа зүйлсд анзаарагдалгүй өгөгдлийн бүтцэд хөдөлгөөн хийнэ гэдэг бэрх. Мөн язгуурчлалыг төслийн хүрээнд хийж болно. Захиалагчын шаардлагад өөрчлөлт нөлөөлөл оруулалгүйгээр төслийн зохион байгуулал, дотоод үйл явц болон хэрэгжүүлэх арга барилд өөрчлөлт оруулан сайжруулалт хийх. Тухайн өөрчлөлтийг хийснээр төслийн үйл явц болон хурд, төлөвлөгөө урьдын хэвээр үргэлжилж байх ёстой бөгөөд энэ нь дараагийн томоохон өөрчлөлтийн бэлтгэл ажил болно. Ингэснээр төслийн бүтэц, хэрэгжүүлэх арга барил болон дэд хэсгүүд илүү тодорхой, зөв зохион байгуулалтад орж ирээдүйд гарч ирч болох шаардлагын өөрчлөлт, рискийг давах чадвар нь дээшлэнэ гэсэн үг. Төслийн язгуурчлалын жишээ гэвэл, тухайн хүнийхээ дадлага чадварт илүү тохирсон ажил дээр шилжүүлэн хуваарьлах, гар нийлдэг хүмүүсийг нэг багт оруулах, бусад ажлуудын ахицад түлхэц өгөх ажлийг эхэнд авчирч хүч нэмэх гэх мэт байж болно. Ингэснээр ерөнхий төлөвлөгөө болон гарцууд хэвээр боловч төслийн зохион байгуулал, бүтэц илүү чийрэг болох юм.</p><p>Эцэст нь хөгжүүлэлтийн процессийн хувьд язгуурчлал ямар байх тухай санаагаа хэлье. Хөгжүүлэлтийн процесс гэдэг маань өмнөх тулгуур дээрээ дөрөөлөн үргэлж өөрчлөгдөж сайжирч байдаг зүйл учраас язгуурчлал хийгдэж байх нь зайлшгүй. Хөгжүүлэлтийн процесстоо ямар нэг шинэ зүйл оруулж ирэх шаардлагатай болоход одоо хэвийн ажиллаж байгаа хөгжүүлэлтийн процессынхоо чухал нэгэн хэсэгийг шууд халаад хаячихаж болохгүй учраас тухайн хэсэгт язгуурчлал хийж шинэ боломжыг оруулж ирэх үүдийг нээж өгөх юм. Үүний дараа бид шаардлагатай байгаа шинэ санаа болон ухагдахуунаа оруулж ирэхэд дөхөмтэй болно.</p><p>Жишээ болгож дараах маягын язгуурчлалыг авч үзье. Бид код бичихдээ эхлээд дотроо юу хийх билээ гэдгээ бүдүүн тойм төсөөлөөд түүнийгээ хийдэг. Тэрийгээ хийчихлээ гэж үзвэл дараачийн илүү нарийн зүйлээ код дээрээ нэмээд бичээд явдаг шүү дээ. Гэтэл энэ дарааллыг язгуурчлаад үзвэл дотор нь тестээр удирдагдах хөгжүүлэлтийн(test driven development-TDD) үндсэн санаа явж байна: Эхлээд тестээ тодорхойлно, дараа нь кодоо бичнэ, код маань тестийг давах эсэхийг шалгана, давахгүй бол ахиад кодоо бичсээр, давсны дараа дахин шинэ тест тодорхойлно -гэсэн дарааллыг тестээр удирдагдах хөгжүүлэлт(TDD) гэдэг. Дээр дурдсан алхамуудад эхлээд наад захын хийх зүйлээ тодорхойлох гэдэгийг тестээ тодохойлох болгоод, дараа дараагийн алхамуудыг TDD-ийнхтэй нийцүүлээд язгуурчилвал бид өмнө байсан зүйлээ өөрчлөөд TDD-ийг язгуурчлаад гаргаад ирж байна. Ер нь TDD болон Agile чиглэлийн аргачлалууд нь жижиг системийг хөгжүүлэхэд тохиромжтой гэдэг ч үнэндээ том системийн дэд хэсгүүдийг хоорондоо хамаарал багатайгаар зохиомжилж чадвал хэсэг бүрийн хувьд TDD эсвэл бусад Agile аргачлалыг хэрэглэх замаар том системийг хөгжүүлэхэд ч Agile хандлагыг үр өгөөжтэй хэрэглэж болох нь харагдаж байна.</p><p>Ер нь хөгжүүлэлтийн процесс бол байнга өөрчлөгдөн сайжирч байх жамтай учраас анхнаасаа процессынхоо загварыг ирээдүйд шинэ санаа болон аргачлалыг оруулж ирэхэд нээлттэй байдлаар алсыг харж тодорхойлох нь чийрэг, чадамжтай хөгжүүлэлтийн процессыг бүрдүүлэх үндэс суурь нь билээ.</p><p>Холбоосууд:</p><ul><li><a href=http://en.wikipedia.org/wiki/Refactoring>Wikipedia - Refactoring</a></li><li><a href="http://dictionary.reference.com/search?q=refactoring">Dictionary.com - Refactoring</a></li><li><a href=http://www.refactoring.com/>Martin Fowler - Refactoring home page</a></li><li><a href=http://c2.com/cgi/wiki?WhatIsRefactoring>What is refactoring</a></li><li><a href=http://www.agiledata.org/essays/databaseRefactoring.html>The Process of Database Refactoring</a></li></ul></div></article></div><footer class=mt-12><div class="flex flex-col md:flex-row md:justify-between -mx-2 pt-2 px-2 pb-6 border-t"><div class="md:mr-12 md:w-1/2"><a href=https://ochko.github.io/tech/2006-06-rss-feed/ class=block><span class="block font-semibold text-gray-600">Previous</span>
<span class=block>Блог дээрээ RSS оруулав</span></a></div><div class="md:text-right mt-4 md:mt-0"><a href=https://ochko.github.io/tech/2006-06-27-time-management/ class=block><span class="block font-semibold text-gray-600">Next</span>
<span class=block>Цаг хугацаа урсан өнгөрөх бус бид урсан өнгөрдөг</span></a></div></div><div class="text-xs text-center">&copy; 2006-2021 L.Ochirkhuyag</div></footer></div><script defer src=/katex/katex.min.js></script><script defer src=/katex/auto-render.min.js onload=renderMathInElement(document.body)></script></body></html>